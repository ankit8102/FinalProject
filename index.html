<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Luminous Moon Model with Custom Marker</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.min.js"></script>
</head>
<body style="margin: 0; overflow: hidden;">
    <a-scene embedded arjs>
        <!-- Custom marker -->
        <a-marker type="pattern" url="ankitm.patt">
            <!-- Interactive Luminous Moon Sphere -->
            <a-sphere id="moon"
                      radius="1"
                      position="0 0.5 0"
                      rotation="0 45 0"
                      src="moon.jpeg" 
                      material="color: #ffffff; emissive: #aaaaaa; emissiveIntensity: 0.5; roughness: 0.9; metalness: 0.1">
            </a-sphere>
        </a-marker>

        <!-- AR Camera -->
        <a-entity camera></a-entity>
    </a-scene>

    <script>
        // Interaction variables
        let moon = document.getElementById('moon');
        let scale = 1; // Default scale for the moon
        let isDragging = false;
        let previousX = 0;

        // Pinch/Zoom event for scaling
        document.addEventListener('touchmove', (event) => {
            if (event.touches.length === 2) {  // Detect two-finger gesture
                const touch1 = event.touches[0];
                const touch2 = event.touches[1];
                
                // Calculate the distance between the two touch points
                const dx = touch1.pageX - touch2.pageX;
                const dy = touch1.pageY - touch2.pageY;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                // Scale model based on the pinch distance
                scale = Math.max(0.5, Math.min(2, distance / 200)); // Scale between 0.5 and 2
                moon.setAttribute('scale', `${scale} ${scale} ${scale}`);
            }
        });

        // Single finger drag event for rotation
        moon.addEventListener('touchstart', (event) => {
            if (event.touches.length === 1) {
                isDragging = true;
                previousX = event.touches[0].clientX;
            }
        });

        moon.addEventListener('touchmove', (event) => {
            if (isDragging && event.touches.length === 1) {
                const deltaX = event.touches[0].clientX - previousX;
                previousX = event.touches[0].clientX;

                // Rotate moon based on drag movement
                let rotation = moon.getAttribute('rotation');
                rotation.y += deltaX * 0.5; // Adjust sensitivity with multiplier
                moon.setAttribute('rotation', rotation);
            }
        });

        moon.addEventListener('touchend', () => {
            isDragging = false;
        });
    </script>
</body>
</html>
